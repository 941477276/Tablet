/*!
* Tablet
* Tablet是一个基于canvas的在线画板，内置精简版jQuery，无其他依赖，传统网站或vue、react、angular等单页面应用皆可使用！兼容各种移动设备！
* github: https://github.com/941477276/Tablet
*/(function(factory){if(typeof define==="function"&&define.amd){define(factory)}else if(typeof module==="object"&&module.exports){module.exports=factory(require())}else{window.Tablet=factory();try{if(typeof define==="function"){define(function(require){return factory(require())})}}catch(e){console.log(e)}}})(function(){function Line(ctx,ctxBack,lineConfig,bgConfig){this.ctx=ctx;this.ctxBack=ctxBack;this.lineConfig=lineConfig||{};this.bgConfig=bgConfig||{};this.points=[]}Line.prototype.draw=function(widthRate,heightRate,onlyCtxBackDraw,devicePixelRatio){widthRate=typeof widthRate==="undefined"?1:parseFloat(widthRate);heightRate=typeof heightRate==="undefined"?1:parseFloat(heightRate);widthRate=widthRate>0?widthRate:1;heightRate=heightRate>0?heightRate:1;onlyCtxBackDraw=typeof onlyCtxBackDraw==="undefined"?false:!!onlyCtxBackDraw;var lineConfig=this.lineConfig;var ctxBack=this.ctxBack;var ctx=onlyCtxBackDraw?this.ctxBack:this.ctx;ctx.beginPath();for(var attr in lineConfig){ctx[attr]=lineConfig[attr]}ctx.lineWidth=lineConfig.lineWidth*Math.min(widthRate,heightRate);if(this.points.length==1){var point=this.points[0];var x=point.x*widthRate;var y=point.y*heightRate;ctx.moveTo(x,y);ctx.lineTo(x,y);ctx.stroke();return}this.points.forEach(function(point,index){var x=point.x*widthRate;var y=point.y*heightRate;ctx[index>0?"lineTo":"moveTo"](x,y);if(index>0){ctx.stroke()}})};Line.prototype.addPoint=function(x,y){this.points.push({x:x,y:y})};function OperationRecord(options){this.tablet=options.tablet;this.type=options.type;this.linesIndex=typeof options.linesIndex==="undefined"?-1:options.linesIndex;this.lines=[].concat(options.lines);this.lineConfig=options.lineConfig?$.extend({},options.lineConfig):null;this.bgConfig=options.bgConfig?$.extend({},options.bgConfig):null}OperationRecord.prototype.exec=function(){var that=this;var tablet=this.tablet;var ctx=tablet.ctx;var ctxBack=this.tablet.ctxBack;var drawLine=function(onlyCtxBackDraw){console.log("画线");onlyCtxBackDraw=typeof onlyCtxBackDraw=="undefined"?false:!!onlyCtxBackDraw;that.lines.forEach(function(line){if(line){line.draw(tablet.widthZoomRate,tablet.heightZoomRate,onlyCtxBackDraw,that.tablet.devicePixelRatio)}})};var drawBg=function(bgConfig){if(bgConfig.bgType=="color"){tablet.setBackgroundColor(bgConfig.bgColor,bgConfig.x,bgConfig.y,bgConfig.width,bgConfig.height,false)}else if(bgConfig.bgType=="img"){tablet.setBackgroundImage(bgConfig.bgImg,bgConfig.x,bgConfig.y,bgConfig.width,bgConfig.height,null,null,false)}};var devicePixelRatio=this.tablet.devicePixelRatio;switch(this.type){case"drawLine":ctxBack.clearRect(0,0,tablet.width,tablet.height);drawLine(true);drawBg(that.bgConfig);break;case"bgColor":case"bgImg":ctxBack.clearRect(0,0,tablet.width,tablet.height);drawLine(true);drawBg(that.bgConfig);break}};function Tablet(container,config){this._init(container,config);this._ctxInit()}Tablet._conut=0;Tablet.prototype._init=function(_container,config){var container=$(_container);if(container.length==0){throw"第一个参数必须是包裹画布的选择器或dom元素！"}container=container.eq(0);var that=this;this.config={response:true,width:0,height:0,extraClass:"",defaultColor:"#000",defaultBackgroundColor:"transparent",defaultBgType:"color",defaultBgImg:null,defaultHeight:400,autoResize:true,imgType:"png",onInit:function(){},onBeforeClear:function(){},onClear:function(){},onEvent:function(e){}};if(config&&{}.toString.call(config)==="[object Object]"){$.extend(true,this.config,config)}this.container=container;this.id="Tablet_LYN_"+Tablet._conut++;this.devicePixelRatio=window.devicePixelRatio||1;this.isMobile=/phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent);this.lineConfig={strokeStyle:this.config.defaultColor,lineWidth:8,lineWidthZoomRate:1,lineCap:"round",lineJoin:"round",shadowBlur:1,shadowColor:this.config.defaultColor};this.bgConfig={bgColor:this.config.defaultBackgroundColor,bgImg:this.config.bgImg,bgType:this.config.bgType,x:0,y:0,width:-1,height:-1};this.container.append($(this.buildTablet()));this.$tablet=$("#"+this.id);this.$canvas=this.$tablet.find("canvas").eq(0);this.canvas=this.$canvas[0];this.ctx=this.canvas.getContext("2d");this.$canvasBack=this.$tablet.find(".backup-canvas");this.$canvasBack.hide();this.canvasBack=this.$canvasBack[0];this.ctxBack=this.canvasBack.getContext("2d");this.point={x:0,y:0};this.lines=[];this.operationRecords=[];this.degree=0;this.version="2.0.1";if(typeof this.config.width==="function"){this.width=this.config.width()}else{this.width=this.config.width}if(typeof this.config.height==="function"){this.height=this.config.height()}else{this.height=this.config.height}that.setCanvasWH(that.width,that.height);this.widthOrigin=this.width;this.heightOrigin=this.height;this.widthZoomRate=1;this.heightZoomRate=1;if(this.config.autoResize){this._removeResizeEventFn=this._bindResizeEvent()}var winW=$(window).width();if(this.isMobile){if(winW>=768){that.lineConfig.lineWidth=8}else if(winW<768&&winW>=414){that.lineConfig.lineWidth=6}else if(winW<414&&winW>=375){that.lineConfig.lineWidth=4}else if(winW<375&&winW>=320){that.lineConfig.lineWidth=2}}this.config.onInit&&typeof this.config.onInit==="function"&&this.config.onInit.call(this)};Tablet.prototype._ctxInit=function(){var that=this,pait=function(singal){switch(singal){case 1:that.ctx.beginPath();that.ctx.moveTo(that.point.x,that.point.y);that.lines.push(new Line(that.ctx,that.ctxBack,$.extend({},that.lineConfig),$.extend({},that.bgConfig)));case 2:that.ctx.lineWidth=that.lineConfig.lineWidth*that.lineConfig.lineWidthZoomRate;that.ctx.lineTo(that.point.x,that.point.y);that.ctx.stroke();that.lines[that.lines.length-1].addPoint(that.point.x/that.widthZoomRate,that.point.y/that.heightZoomRate);break;default:}},pressed=this.pressed=false,create=function(singal){return function(e){e.preventDefault();if(singal===1){that.pressed=true}if(singal===1||that.pressed){e=that.isMobile?e.touches[0]:e;var canvasScroll=that.$canvas.offset();var scrollTop=$(document.documentElement).scrollTop();var scrollLeft=$(document.documentElement).scrollLeft();that.point.x=e.clientX-(canvasScroll.left+.5-scrollLeft);that.point.y=e.clientY-(canvasScroll.top+.5-scrollTop);pait(singal)}}};var lineConfig=that.lineConfig;for(var attr in lineConfig){that.ctx[attr]=lineConfig[attr];that.ctxBack[attr]=lineConfig[attr]}if(!that.isMobile){that.ctx.shadowBlur=lineConfig.shadowBlur;that.ctx.shadowColor=lineConfig.shadowColor;that.ctxBack.shadowBlur=lineConfig.shadowBlur;that.ctxBack.shadowColor=lineConfig.shadowColor}var start=create(1),move=create(2),animationMove=window.requestAnimationFrame?function(e){requestAnimationFrame(function(){move(e)})}:move,endEvent=function(){that.pressed=false;if(that.lines.length>0){if(that.lines[that.lines.length-1]){that.lines[that.lines.length-1].draw(0,0,true,that.devicePixelRatio)}}},addOperationRecordFn=function(){that.pressed=false;if(that.lines.length>0){that.operationRecords.push(new OperationRecord({type:"drawLine",tablet:that,lines:that.lines,bgConfig:that.bgConfig,linesIndex:that.lines.length-1}));that.config.onEvent({type:"drawLine",target:that})}};var drawBg=function(bgConfig){if(bgConfig.bgType=="color"){that.setBackgroundColor(bgConfig.bgColor,-1,-1,-1,-1,false)}else if(bgConfig.bgType=="img"){that.setBackgroundImage(bgConfig.bgImg,-1,-1,-1,-1,null,null,false)}};drawBg({bgType:this.config.defaultBgType,bgColor:this.config.defaultBackgroundColor,bgImg:this.config.defaultBgImg});if(this.isMobile){this.$canvas.on("touchstart",start);this.$canvas.on("touchmove",move)}else{this.$canvas.on("mousedown",start);this.$canvas.on("mousemove",move)}["touchend","mouseleave","mouseup"].forEach(function(event,index){that.$canvas.on(event,endEvent)});["touchend","mouseup"].forEach(function(event,index){that.$canvas.on(event,addOperationRecordFn)})};Tablet.prototype._bindResizeEvent=function(){var event="resize";var that=this;var lastUpdateTime=0;var tabletLastWidth=this.width;event+=window.onorientationchange?" orientationchange":"";console.log("resize event");var eventFn=function(){var now=(new Date).getTime();if(lastUpdateTime==0||now-lastUpdateTime>100){lastUpdateTime=now;var tablet=that.$tablet,bl=parseFloat(tablet.css("border-left-width")),br=parseFloat(tablet.css("border-right-width")),bt=parseFloat(tablet.css("border-top-width")),bb=parseFloat(tablet.css("border-bottom-width")),pl=parseFloat(tablet.css("padding-left")),pr=parseFloat(tablet.css("padding-right")),pt=parseFloat(tablet.css("padding-top")),pb=parseFloat(tablet.css("padding-bottom"));var tabletW=tablet.width()-bl-br-pl-pr;var tabletH=tablet.height()-bt-bb-pt-pb;if(tabletLastWidth==tabletW){console.info("container width not changed!");return}tabletLastWidth=tabletW;that.setCanvasWH();that.refresh()}};$(window).on(event,eventFn);return function(){$(window).off(event,eventFn)}};Tablet.prototype.refresh=function(refreshWH){var that=this;refreshWH=typeof refreshWH=="undefined"?false:!!refreshWH;if(refreshWH){this.setCanvasWH()}var widthRate=that.width/that.widthOrigin;var heightRate=that.height/that.heightOrigin;var bgConfig=that.bgConfig;var dragBg=function(){console.log("重绘背景！");if(bgConfig.bgType=="color"){that.setBackgroundColor(bgConfig.bgColor,bgConfig.x,bgConfig.y,bgConfig.width,bgConfig.height,false)}else if(bgConfig.bgType=="img"){that.setBackgroundImage(bgConfig.bgImg,bgConfig.x,bgConfig.y,bgConfig.width,bgConfig.height,null,null,false)}};that.lineConfig.lineWidthZoomRate=Math.min(widthRate,heightRate);that.widthZoomRate=widthRate;that.heightZoomRate=heightRate;console.log("rate",Math.min(widthRate,heightRate));var hasCanUseLines=that.hasCanUseLine();console.log("有可用线条",hasCanUseLines);if(!hasCanUseLines){that.canvasReset();dragBg();return this}that.ctxBack.clearRect(0,0,that.width,that.height);that.lines.forEach(function(item){if(item){item.draw(widthRate,heightRate,true,that.devicePixelRatio)}});that.ctx.clearRect(0,0,that.width,that.height);if(bgConfig.bgType=="color"&&bgConfig.bgColor=="transparent"){that.ctx.drawImage(that.canvasBack,0,0,that.width*devicePixelRatio,that.height*devicePixelRatio,0,0,that.width,that.height);return this}dragBg();return this};Tablet.prototype.getRect=function(){var w=this.width,h=this.height;if(this.degree==90||this.degree==-90){w=this.height;h=this.width}var offset=this.$canvas.offset();return{x:offset.left,y:offset.top,width:w,height:h}};Tablet.prototype.hasCanUseLine=function(){var hasCanUseLines=this.lines.some(function(line){return!!line});return hasCanUseLines};Tablet.prototype.setColor=function(color){var that=this;that.ctx.beginPath();if(!color){console.error("color is required!");return this}that.lineConfig.strokeStyle=color;that.ctx.strokeStyle=color;that.ctxBack.strokeStyle=color;if(!that.isMobile){that.lineConfig.shadowColor=color;that.ctx.shadowColor=color;that.ctxBack.shadowColor=color}return this};Tablet.prototype.setLineWidth=function(number){var that=this;number=parseFloat(number);if(isNaN(number)){console.error("number is required a Number!");return this}that.lineConfig.lineWidth=number;that.ctx.beginPath();that.ctxBack.beginPath();that.ctx.lineWidth=number;that.ctxBack.lineWidth=number;return this};Tablet.prototype.setBackgroundColor=function(bgColor,x,y,width,height,addToOperationRecord){var canvasRect=this.getRect();var that=this,newWidth=width>0?width:canvasRect.width,newHeight=height>0?height:canvasRect.height,devicePixelRatio=this.devicePixelRatio;x=x>0?x:0;y=y>0?y:0;this.bgConfig.bgType="color";this.bgConfig.bgColor=bgColor;this.bgConfig.bgImg=null;this.bgConfig.x=x;this.bgConfig.y=y;this.bgConfig.width=width;this.bgConfig.height=height;this.ctx.clearRect(x,y,newWidth,newHeight);this.ctx.fillStyle=bgColor;this.ctx.fillRect(x,y,newWidth,newHeight);if(this.hasCanUseLine()){console.log("重新绘制",x,y,newWidth*devicePixelRatio,newHeight*devicePixelRatio,x,y,newWidth,newHeight);that.ctx.drawImage(that.canvasBack,x,y,newWidth*devicePixelRatio,newHeight*devicePixelRatio,x,y,newWidth,newHeight)}addToOperationRecord=typeof addToOperationRecord=="undefined"?true:false;if(addToOperationRecord){this.operationRecords.push(new OperationRecord({type:"bgColor",tablet:this,lines:this.lines,bgConfig:this.bgConfig}));that.config.onEvent({type:"bgColor",target:that})}return this};Tablet.prototype.setBackgroundImage=function(img,x,y,width,height,onImgLoading,onFail,addToOperationRecord){if(!img){console.error("setBackgroundImage函数必须传递一个图片url地址或图片dom对象！");return false}var that=this;var devicePixelRatio=this.devicePixelRatio;var imgLoad=function(){var canvasRect=that.getRect();x=x>0?x:0;y=y>0?y:0;var newWidth=width>0?width:canvasRect.width;var newHeight=height>0?height:canvasRect.height;that.bgConfig.bgType="img";that.bgConfig.bgImg=img;that.bgConfig.bgColor="";that.bgConfig.x=x;that.bgConfig.y=y;that.bgConfig.width=width;that.bgConfig.height=height;typeof onImgLoading==="function"&&onImgLoading({statusCode:2,status:"ok",img:img});that.ctx.clearRect(x,y,newWidth,newHeight);that.ctx.drawImage(img,x,y,newWidth,newHeight);if(that.hasCanUseLine()){console.log("重新绘制",x,y,newWidth*devicePixelRatio,newHeight*devicePixelRatio,x,y,newWidth,newHeight);that.ctx.drawImage(that.canvasBack,x,y,newWidth*devicePixelRatio,newHeight*devicePixelRatio,x,y,newWidth,newHeight)}addToOperationRecord=typeof addToOperationRecord=="undefined"?true:false;if(addToOperationRecord){that.operationRecords.push(new OperationRecord({type:"bgImg",tablet:that,lines:that.lines,bgConfig:that.bgConfig}));that.config.onEvent({type:"bgImg",target:that})}console.log("图片绘制完成")};var imgLoadError=function(){console.error("图片加载失败,不能进行绘制");typeof onFail==="function"&&onFail()};if(typeof img=="string"){typeof onImgLoading==="function"&&onImgLoading({statusCode:1,status:"loading"});var url=img;img=new Image;img.onload=imgLoad;img.onerror=imgLoadError;img.src=url}else{if(!img.complete){img.onload=imgLoad;img.onerror=imgLoadError}else{imgLoad()}}};Tablet.prototype.setCanvasWH=function(width,height){if(!width||!height){var tablet=this.$tablet;var bl=parseFloat(tablet.css("border-left-width")),br=parseFloat(tablet.css("border-right-width")),bt=parseFloat(tablet.css("border-top-width")),bb=parseFloat(tablet.css("border-bottom-width")),pl=parseFloat(tablet.css("padding-left")),pr=parseFloat(tablet.css("padding-right")),pt=parseFloat(tablet.css("padding-top")),pb=parseFloat(tablet.css("padding-bottom"));this.width=tablet.width()-bl-br-pl-pr;this.height=tablet.height()-bt-bb-pt-pb;if(this.width<=0){this.width=this.container.width()}if(this.height<=0){this.height=this.container.height();if(this.height<=0){this.height=this.config.defaultHeight}}}else{this.width=width;this.height=height}this.$canvas.css("display","block");var lineConfig=this.lineConfig;var devicePixelRatio=this.devicePixelRatio=window.devicePixelRatio||1;if(devicePixelRatio&&devicePixelRatio>1){var canvasW=this.width*devicePixelRatio;var canvasH=this.height*devicePixelRatio;this.$canvas.width(this.width);this.$canvas.height(this.height);this.$canvasBack.width(this.width);this.$canvasBack.height(this.height);this.canvas.width=canvasW;this.canvas.height=canvasH;this.canvasBack.width=canvasW;this.canvasBack.height=canvasH;this.ctx.scale(devicePixelRatio,devicePixelRatio);this.ctxBack.scale(devicePixelRatio,devicePixelRatio);this.ctx.clearRect(0,0,canvasW,canvasH);this.ctxBack.clearRect(0,0,canvasW,canvasH)}else{this.canvas.width=this.width;this.canvas.height=this.height;this.canvasBack.width=this.width;this.canvasBack.height=this.height;this.ctx.clearRect(0,0,this.width,this.height);this.ctxBack.clearRect(0,0,this.width,this.height)}for(var attr in lineConfig){this.ctx[attr]=lineConfig[attr];this.ctxBack[attr]=lineConfig[attr]}return this};Tablet.prototype.canvasReset=function(){var that=this;var lineConfig=this.lineConfig;for(var attr in lineConfig){that.ctx[attr]=lineConfig[attr];that.ctxBack[attr]=lineConfig[attr]}if(!that.isMobile){that.ctx.shadowBlur=lineConfig.shadowBlur;that.ctx.shadowColor=lineConfig.shadowColor;that.ctxBack.shadowBlur=lineConfig.shadowBlur;that.ctxBack.shadowColor=lineConfig.shadowColor}return this};Tablet.prototype.revoke=function(){var operationRecords=this.operationRecords;var that=this;if(operationRecords.length==0){return this}var step=operationRecords.length-1;var operation=operationRecords.splice(step,1);console.log("step",step,operation[0],operation[0].linesIndex);if(operation[0].linesIndex>-1){this.removeLine(operation[0].linesIndex)}if(operationRecords.length==0){this.ctx.clearRect(0,0,this.width,this.height);this.ctxBack.clearRect(0,0,this.width,this.height);var drawBg=function(bgConfig){if(bgConfig.bgType=="color"){that.setBackgroundColor(bgConfig.bgColor,-1,-1,-1,-1,false)}else if(bgConfig.bgType=="img"){that.setBackgroundImage(bgConfig.bgImg,-1,-1,-1,-1,null,null,false)}};drawBg({bgType:this.config.defaultBgType,bgColor:this.config.defaultBackgroundColor,bgImg:this.config.defaultBgImg});return this}var nextOperation=operationRecords[step-1];nextOperation.exec();return this};Tablet.prototype.clear=function(clearPoints){var w=this.width,h=this.height;clearPoints=typeof clearPoints==="undefined"?false:!!clearPoints;if(this.config.onBeforeClear&&typeof this.config.onBeforeClear==="function"){var flag=this.config.onBeforeClear.call(this);if(flag===false){return}}if(this.degree==90||this.degree==-90){w=this.height;h=this.width}this.ctx.clearRect(0,0,w,h);this.ctxBack.clearRect(0,0,w,h);if(clearPoints){this.operationRecords=[];this.lines=[]}this.config.onClear&&typeof this.config.onClear==="function"&&this.config.onClear.call(this);return this};Tablet.prototype.removeLine=function(indexOrLine){var lines=this.lines;console.log("indexOrLine",indexOrLine);if(typeof indexOrLine=="number"){lines.splice(indexOrLine,1,null);console.log("lines",lines)}else if(typeof indexOrLine=="object"){var index=-1;for(var i=0,len=lines.length;i<len;i++){if(lines[i]==indexOrLine){index=i;break}}lines.splice(index,1,null)}return this};Tablet.prototype.getBase64=function(type,angle){var that=this;if(!type){type="image/png"}else{var _type=type.toLowerCase();if(_type==="png"){type="image/png"}else if(_type==="jpg"||_type==="jpeg"){type="image/jpg"}}var base64Img="";if(!angle){base64Img=this.canvas.toDataURL(type,1)}else{var width=this.width;var height=this.height;var devicePixelRatio=this.devicePixelRatio;if(devicePixelRatio&&devicePixelRatio>1){width=width*devicePixelRatio;height=height*devicePixelRatio}if(angle===-90){angle=270}var radian=angle*Math.PI/180;var direction=angle/90%4;var newCanvas=document.createElement("canvas");var newCanvasCtx=newCanvas.getContext("2d");if(direction===0){newCanvas.width=width;newCanvas.height=height;newCanvasCtx.drawImage(this.canvas,0,0)}else if(direction===1){newCanvas.width=height;newCanvas.height=width;newCanvasCtx.translate(newCanvas.width*.5,newCanvas.height*.5);newCanvasCtx.rotate(radian);newCanvasCtx.drawImage(this.canvas,-newCanvas.height/2,-newCanvas.width/2)}else if(direction===2){newCanvas.width=width;newCanvas.height=height;newCanvasCtx.translate(width*.5,height*.5);newCanvasCtx.rotate(radian);newCanvasCtx.drawImage(this.canvas,-newCanvas.width/2,-newCanvas.height/2)}else if(direction===3){newCanvas.width=height;newCanvas.height=width;newCanvasCtx.translate(newCanvas.width*.5,newCanvas.height*.5);newCanvasCtx.rotate(radian);newCanvasCtx.drawImage(this.canvas,-newCanvas.height/2,-newCanvas.width/2)}base64Img=newCanvas.toDataURL(type,1);newCanvas=null;newCanvasCtx=null}return base64Img};Tablet.prototype.getBlob=function(type,angle){var that=this,base64Img=this.getBase64(type,angle),arr=base64Img.split(","),mime=arr[0].match(/:(.*?);/)[1],bStr=atob(arr[1]),len=bStr.length,u8arr=new Uint8Array(len);while(len--){u8arr[len]=bStr.charCodeAt(len)}return new Blob([u8arr],{type:mime})};Tablet.prototype.buildTablet=function(){var html="",flex="";html+='<div class="-tablet '+flex+this.config.extraClass+'" id="'+this.id+'">';html+='    <div class="-canvas-wrapper">';html+='        <canvas class="tablet-canvas" style="cursor: crosshair;display: none;"></canvas>';html+='        <canvas class="backup-canvas"></canvas>';html+="    </div>";html+="</div>";return html};Tablet.getMax=function(xPoints,yPoints){var obj={left:0,right:0,top:0,bottom:0};if({}.toString.call(xPoints)!=="[object Array]"||{}.toString.call(yPoints)!=="[object Array]"){return obj}obj.left=Math.min.apply(null,xPoints);obj.right=Math.max.apply(null,xPoints);obj.top=Math.min.apply(null,yPoints);obj.bottom=Math.max.apply(null,yPoints);return obj};Tablet.prototype.destroy=function(){this.$canvas.css("cursor","default");this.$canvas.off();this.$canvasBack.off();this.canvas=null;this.$canvas=null;this.ctx=null;this.canvasBack=null;this.$canvasBack=null;this.ctxBack=null;this.$tablet=null;this.container=null;this.lines=[];this.operationRecords=[];if(typeof this._removeResizeEventFn==="function"){this._removeResizeEventFn();this._removeResizeEventFn=null}};return Tablet});