!function(){"use strict";
/*!
  * Tablet
  * Tablet是一个轻量级的基于canvas的在线画板，无其他依赖，传统网站或vue、react、angular等单页面应用皆可使用！兼容各种移动设备！
  * github: https://github.com/941477276/Tablet
  */!function(t){if("function"==typeof define&&define.amd)define(t);else if("object"==typeof module&&module.exports)module.exports=t(require());else{window.Tablet=t();try{"function"==typeof define&&define((function(e){return t(e())}))}catch(t){}}}((function(){function t(t,e,i,n){this.ctx=t,this.ctxBack=e,this.lineConfig=i||{},this.bgConfig=n||{},this.backuped=!1,this.points=[]}function e(t){this.tablet=t.tablet,this.type=t.type,this.linesIndex=void 0===t.linesIndex?-1:t.linesIndex,this.lines=[].concat(t.lines),this.lineConfig=t.lineConfig?n.extend({},t.lineConfig):null,this.bgConfig=t.bgConfig?n.extend({},t.bgConfig):null}function i(t,e){this._init(t,e),this._ctxInit()}t.prototype.draw=function(t,e,i,n){t=void 0===t?1:parseFloat(t),e=void 0===e?1:parseFloat(e),t=t>0?t:1,e=e>0?e:1,i=void 0!==i&&!!i;var o=this.lineConfig,s=i?this.ctxBack:this.ctx;for(var r in s.beginPath(),o)s[r]=o[r];if(s.lineWidth=o.lineWidth*Math.min(t,e),1==this.points.length){var a=this.points[0],h=a.x*t,l=a.y*e;return s.moveTo(h,l),s.lineTo(h,l),void s.stroke()}this.points.forEach((function(i,n){var o=i.x*t,r=i.y*e;s[n>0?"lineTo":"moveTo"](o,r),n>0&&s.stroke()}))},t.prototype.addPoint=function(t,e){this.points.push({x:t,y:e})},e.prototype.exec=function(){var t=this,e=this.tablet,i=(e.ctx,this.tablet.ctxBack),n=function(i){i=void 0!==i&&!!i,t.lines.forEach((function(n){n&&n.draw(e.widthZoomRate,e.heightZoomRate,i,t.tablet.devicePixelRatio)}))},o=function(t){"color"==t.bgType?e.setBackgroundColor(t.bgColor,t.x,t.y,t.width,t.height,!1):"img"==t.bgType&&e.setBackgroundImage(t.bgImg,t.x,t.y,t.width,t.height,null,null,!1)};this.tablet.devicePixelRatio;switch(this.type){case"drawLine":case"bgColor":case"bgImg":i.clearRect(0,0,e.width,e.height),n(!0),o(t.bgConfig)}},i._conut=0,i.prototype._init=function(t,e){var o,s=this;if("string"==typeof t?o=document.querySelector(t):"object"==typeof t&&1==t.nodeType&&(o=t),!o)throw new Error("el参数必须是一个css选择器或dom元素！");this.config={response:!0,width:0,height:0,extraClass:"",defaultColor:"#000",defaultBackgroundColor:"transparent",defaultBgType:"color",defaultBgImg:null,defaultHeight:400,autoResize:!0,imgType:"png",onInit:function(){},onBeforeClear:function(){},onClear:function(){}},e&&"object"===n.getType(e)&&n.extend(!0,this.config,e),this.container=o,this.id="Tablet_LYN_"+i._conut++,this.devicePixelRatio=window.devicePixelRatio||1,this.isMobile=/phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent),this.lineConfig={strokeStyle:this.config.defaultColor,lineWidth:8,lineWidthZoomRate:1,lineCap:"round",lineJoin:"round",shadowBlur:1,shadowColor:this.config.defaultColor},this.bgConfig={bgColor:this.config.defaultBackgroundColor,bgImg:this.config.bgImg,bgType:this.config.bgType,x:0,y:0,width:-1,height:-1},this.container.appendChild(this.buildTablet());var r=this.tabletEl=document.getElementById(this.id);this.canvas=r.querySelector(".tablet-canvas"),this.ctx=this.canvas.getContext("2d"),this.canvasBack=r.querySelector(".backup-canvas"),this.ctxBack=this.canvasBack.getContext("2d"),this.point={x:0,y:0},this.lines=[],this.operationRecords=[],this.degree=0,this.version="2.0.4","function"==typeof this.config.width?this.width=this.config.width():this.width=this.config.width,"function"==typeof this.config.height?this.height=this.config.height():this.height=this.config.height;var a=n.getDocumentWidthHeight();this.isMobile&&(delete this.lineConfig.shadowBlur,delete this.lineConfig.shadowColor,a>=768?this.lineConfig.lineWidth=8:a<768&&a>=414?this.lineConfig.lineWidth=6:a<414&&a>=375?this.lineConfig.lineWidth=4:a<375&&a>=320&&(this.lineConfig.lineWidth=2)),this.setCanvasWH(this.width,this.height),this.widthOrigin=this.width,this.heightOrigin=this.height,this.widthZoomRate=1,this.heightZoomRate=1,n.setCss(this.canvas,"display","block"),this.config.autoResize&&(this._removeResizeEventFn=this._bindResizeEvent()),n.on(r,"DOMNodeRemoved",(function(){s.destroy()})),this.config.onInit&&"function"==typeof this.config.onInit&&this.config.onInit.call(this)},i.prototype._ctxInit=function(){var i=this,o=(this.pressed=!1,function(e){return function(o){if(o.preventDefault(),1===e&&(i.pressed=!0),1===e||i.pressed){o=i.isMobile?o.touches[0]:o;var s=n.offset(i.canvas),r=n.scrollTop(),a=n.scrollLeft();i.point.x=o.clientX-(s.left+.5-a),i.point.y=o.clientY-(s.top+.5-r),function(e){switch(e){case 1:i.ctx.beginPath(),i.ctx.moveTo(i.point.x,i.point.y),i.lines.push(new t(i.ctx,i.ctxBack,n.extend({},i.lineConfig),n.extend({},i.bgConfig)));case 2:i.ctx.lineWidth=i.lineConfig.lineWidth*i.lineConfig.lineWidthZoomRate,i.ctx.lineTo(i.point.x,i.point.y),i.ctx.stroke(),i.lines[i.lines.length-1].addPoint(i.point.x/i.widthZoomRate,i.point.y/i.heightZoomRate)}}(e)}}}),s=i.lineConfig;for(var r in s)i.ctx[r]=s[r],i.ctxBack[r]=s[r];i.isMobile||(i.ctx.shadowBlur=s.shadowBlur,i.ctx.shadowColor=s.shadowColor,i.ctxBack.shadowBlur=s.shadowBlur,i.ctxBack.shadowColor=s.shadowColor);var a,h=o(1),l=o(2),c=(window.requestAnimationFrame,function(){if(i.pressed=!1,i.lines.length>0){var t=i.lines[i.lines.length-1];t&&!t.backuped&&(t.draw(0,0,!0,i.devicePixelRatio),t.backuped=!0)}}),g=function(){i.pressed=!1,i.lines.length>0&&i.operationRecords.push(new e({type:"drawLine",tablet:i,lines:i.lines,bgConfig:i.bgConfig,linesIndex:i.lines.length-1}))};"color"==(a={bgType:this.config.defaultBgType,bgColor:this.config.defaultBackgroundColor,bgImg:this.config.defaultBgImg}).bgType?i.setBackgroundColor(a.bgColor,-1,-1,-1,-1,!1):"img"==a.bgType&&i.setBackgroundImage(a.bgImg,-1,-1,-1,-1,null,null,!1);var d=this.canvas;this.isMobile?(n.on(d,"touchstart",h),n.on(d,"touchmove",l)):(n.on(d,"mousedown",h),n.on(d,"mousemove",l)),["touchend","mouseleave","mouseup"].forEach((function(t,e){n.on(d,t,c)})),["touchend","mouseup"].forEach((function(t,e){n.on(d,t,g)}))},i.prototype._bindResizeEvent=function(){var t="resize",e=this,i=0,o=this.width;this.height;t+=window.onorientationchange?" orientationchange":"";var s=function(){var t=(new Date).getTime();if(0==i||t-i>100){i=t;var s=e.tabletEl,r=parseFloat(n.getStyle(s,"border-left-width")),a=parseFloat(n.getStyle(s,"border-right-width")),h=parseFloat(n.getStyle(s,"border-top-width")),l=parseFloat(n.getStyle(s,"border-bottom-width")),c=parseFloat(n.getStyle(s,"padding-left")),g=parseFloat(n.getStyle(s,"padding-right")),d=parseFloat(n.getStyle(s,"padding-top")),f=parseFloat(n.getStyle(s,"padding-bottom")),u=s.offsetWidth-r-a-c-g,p=s.offsetHeight-h-l-d-f;if(o==u&&o==p)return;o=u,p,e.setCanvasWH(),e.refresh()}};return n.on(window,t,s),function(){n.off(window,t,s)}},i.prototype.refresh=function(t){var e=this;(t=void 0!==t&&!!t)&&this.setCanvasWH();var i=e.width/e.widthOrigin,n=e.height/e.heightOrigin,o=e.bgConfig,s=function(){"color"==o.bgType?e.setBackgroundColor(o.bgColor,o.x,o.y,o.width,o.height,!1):"img"==o.bgType&&e.setBackgroundImage(o.bgImg,o.x,o.y,o.width,o.height,null,null,!1)};return e.lineConfig.lineWidthZoomRate=Math.min(i,n),e.widthZoomRate=i,e.heightZoomRate=n,e.hasCanUseLine()?(e.ctxBack.clearRect(0,0,e.width,e.height),e.ctx.clearRect(0,0,e.width,e.height),e.lines.forEach((function(t){t&&t.draw(i,n,!0,e.devicePixelRatio)})),"color"==o.bgType&&"transparent"==o.bgColor?(e.ctx.save(),e.ctx.shadowBlur=0,e.ctx.drawImage(e.canvasBack,0,0,e.width*devicePixelRatio,e.height*devicePixelRatio,0,0,e.width,e.height),e.ctx.restore(),this):(s(),this)):(e.canvasReset(),s(),this)},i.prototype.getRect=function(){var t=this.width,e=this.height;90!=this.degree&&-90!=this.degree||(t=this.height,e=this.width);var i=n.offset(this.canvas);return{x:i.left,y:i.top,width:t,height:e}},i.prototype.hasCanUseLine=function(){return this.lines.some((function(t){return!!t}))},i.prototype.setColor=function(t){var e=this;return e.ctx.beginPath(),t?(e.lineConfig.strokeStyle=t,e.ctx.strokeStyle=t,e.ctxBack.strokeStyle=t,e.isMobile||(e.lineConfig.shadowColor=t,e.ctx.shadowColor=t,e.ctxBack.shadowColor=t),this):this},i.prototype.setLineWidth=function(t){var e=this;return t=parseFloat(t),isNaN(t)||(e.lineConfig.lineWidth=t,e.ctx.beginPath(),e.ctxBack.beginPath(),e.ctx.lineWidth=t,e.ctxBack.lineWidth=t),this},i.prototype.setBackgroundColor=function(t,i,n,o,s,r){var a=this.getRect(),h=o>0?o:a.width,l=s>0?s:a.height,c=this.devicePixelRatio;i=i>0?i:0,n=n>0?n:0,this.bgConfig.bgType="color",this.bgConfig.bgColor=t,this.bgConfig.bgImg=null,this.bgConfig.x=i,this.bgConfig.y=n,this.bgConfig.width=o,this.bgConfig.height=s;var g=this.ctx;return g.clearRect(i,n,h,l),g.fillStyle=t,g.save(),g.shadowBlur=0,g.fillRect(i,n,h,l),this.hasCanUseLine()&&this.ctx.drawImage(this.canvasBack,i,n,h*c,l*c,i,n,h,l),g.restore(),(r=void 0===r)&&this.operationRecords.push(new e({type:"bgColor",tablet:this,lines:this.lines,bgConfig:this.bgConfig})),this},i.prototype.setBackgroundImage=function(t,i,n,o,s,r,a,h){if(!t)return!1;var l=this,c=this.devicePixelRatio,g=function(){var a=l.getRect();i=i>0?i:0,n=n>0?n:0;var g=o>0?o:a.width,d=s>0?s:a.height,f=l.ctx;l.bgConfig.bgType="img",l.bgConfig.bgImg=t,l.bgConfig.bgColor="",l.bgConfig.x=i,l.bgConfig.y=n,l.bgConfig.width=o,l.bgConfig.height=s,"function"==typeof r&&r({statusCode:2,status:"ok",img:t}),f.clearRect(i,n,g,d),f.save(),f.shadowBlur=0,f.drawImage(t,i,n,g,d),l.hasCanUseLine()&&f.drawImage(l.canvasBack,i,n,g*c,d*c,i,n,g,d),f.restore(),(h=void 0===h)&&l.operationRecords.push(new e({type:"bgImg",tablet:l,lines:l.lines,bgConfig:l.bgConfig}))},d=function(){"function"==typeof a&&a()};if("string"==typeof t){"function"==typeof r&&r({statusCode:1,status:"loading"});var f=t;(t=new Image).onload=g,t.onerror=d,t.src=f}else t.complete?g():(t.onload=g,t.onerror=d)},i.prototype.setCanvasWH=function(t,e){if(t&&e)this.width=t,this.height=e;else{var i=this.tabletEl,o=parseFloat(n.getStyle(i,"border-left-width")),s=parseFloat(n.getStyle(i,"border-right-width")),r=parseFloat(n.getStyle(i,"border-top-width")),a=parseFloat(n.getStyle(i,"border-bottom-width")),h=parseFloat(n.getStyle(i,"padding-left")),l=parseFloat(n.getStyle(i,"padding-right")),c=parseFloat(n.getStyle(i,"padding-top")),g=parseFloat(n.getStyle(i,"padding-bottom"));this.width=i.offsetWidth-o-s-h-l,this.height=i.offsetHeight-r-a-c-g,this.width<=0&&(this.width=this.container.offsetWidth),this.height<=0&&(this.height=this.container.offsetHeight,this.height<=0&&(this.height=this.config.defaultHeight))}var d=this.canvas,f=this.canvasBack,u=this.ctx,p=this.ctxBack,v=this.lineConfig,w=this.devicePixelRatio=window.devicePixelRatio||1;if(w&&w>1){var b=this.width*w,m=this.height*w;n.setCss(d,"width",this.width),n.setCss(d,"height",this.height),n.setCss(f,"width",this.width),n.setCss(f,"height",this.height),d.width=b,d.height=m,f.width=b,f.height=m,u.scale(w,w),p.scale(w,w),u.clearRect(0,0,b,m),p.clearRect(0,0,b,m)}else d.width=this.width,d.height=this.height,f.width=this.width,f.height=this.height,u.clearRect(0,0,this.width,this.height),p.clearRect(0,0,this.width,this.height);for(var y in v)u[y]=v[y],p[y]=v[y];return this},i.prototype.canvasReset=function(){var t=this,e=this.lineConfig;for(var i in e)t.ctx[i]=e[i],t.ctxBack[i]=e[i];return t.isMobile||(t.ctx.shadowBlur=e.shadowBlur,t.ctx.shadowColor=e.shadowColor,t.ctxBack.shadowBlur=e.shadowBlur,t.ctxBack.shadowColor=e.shadowColor),this},i.prototype.revoke=function(){var t=this.operationRecords,e=this;if(0==t.length)return this;var i,n=t.length-1,o=t.splice(n,1);if(o[0].linesIndex>-1&&this.removeLine(o[0].linesIndex),0==t.length){this.ctx.clearRect(0,0,this.width,this.height),this.ctxBack.clearRect(0,0,this.width,this.height);return"color"==(i={bgType:this.config.defaultBgType,bgColor:this.config.defaultBackgroundColor,bgImg:this.config.defaultBgImg}).bgType?e.setBackgroundColor(i.bgColor,-1,-1,-1,-1,!1):"img"==i.bgType&&e.setBackgroundImage(i.bgImg,-1,-1,-1,-1,null,null,!1),this}return t[n-1].exec(),this},i.prototype.clear=function(t){var e=this.width,i=this.height;if((t=void 0!==t&&!!t,this.config.onBeforeClear&&"function"==typeof this.config.onBeforeClear)&&!1===this.config.onBeforeClear.call(this))return this;return 90!=this.degree&&-90!=this.degree||(e=this.height,i=this.width),this.ctx.clearRect(0,0,e,i),this.ctxBack.clearRect(0,0,e,i),t&&(this.operationRecords=[],this.lines=[]),this.config.onClear&&"function"==typeof this.config.onClear&&this.config.onClear.call(this),this},i.prototype.removeLine=function(t){var e=this.lines;if("number"==typeof t)e.splice(t,1,null);else if("object"==typeof t){for(var i=-1,n=0,o=e.length;n<o;n++)if(e[n]==t){i=n;break}e.splice(i,1,null)}return this},i.prototype.getBase64=function(t,e){if(t){var i=t.toLowerCase();"png"===i?t="image/png":"jpg"!==i&&"jpeg"!==i||(t="image/jpg")}else t="image/png";var n="";if(e){var o=this.width,s=this.height,r=this.devicePixelRatio;r&&r>1&&(o*=r,s*=r),-90===e&&(e=270);var a=e*Math.PI/180,h=e/90%4,l=document.createElement("canvas"),c=l.getContext("2d");0===h?(l.width=o,l.height=s,c.drawImage(this.canvas,0,0)):1===h?(l.width=s,l.height=o,c.translate(.5*l.width,.5*l.height),c.rotate(a),c.drawImage(this.canvas,-l.height/2,-l.width/2)):2===h?(l.width=o,l.height=s,c.translate(.5*o,.5*s),c.rotate(a),c.drawImage(this.canvas,-l.width/2,-l.height/2)):3===h&&(l.width=s,l.height=o,c.translate(.5*l.width,.5*l.height),c.rotate(a),c.drawImage(this.canvas,-l.height/2,-l.width/2)),n=l.toDataURL(t,1),l=null,c=null}else n=this.canvas.toDataURL(t,1);return n},i.prototype.getBlob=function(t,e){for(var i=this.getBase64(t,e).split(","),n=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,r=new Uint8Array(s);s--;)r[s]=o.charCodeAt(s);return new Blob([r],{type:n})},i.prototype.buildTablet=function(){var t="",e=document.createElement("div");return t+='<div class="-tablet '+this.config.extraClass+'" id="'+this.id+'">',t+='    <div class="-canvas-wrapper">',t+='        <canvas class="tablet-canvas" style="cursor: crosshair;display: none;"></canvas>',t+='        <canvas class="backup-canvas" style="display: none;"></canvas>',t+="    </div>",t+="</div>",e.innerHTML=t,e.firstChild},i.getMax=function(t,e){var i={left:0,right:0,top:0,bottom:0};return"[object Array]"!=={}.toString.call(t)||"[object Array]"!=={}.toString.call(e)||(i.left=Math.min.apply(null,t),i.right=Math.max.apply(null,t),i.top=Math.min.apply(null,e),i.bottom=Math.max.apply(null,e)),i},i.prototype.destroy=function(){var t=this.canvas,e=this.canvasBack;n.setCss(t,"cursor","default"),["touchend","mouseleave","mouseup","touchstart","touchmove","mousedown","mousemove","touchend","mouseup"].forEach((function(i,o){n.off(t,i),n.off(e,i)})),t=this.canvas=null,this.ctx=null,e=this.canvasBack=null,this.ctxBack=null,this.tabletEl=null,this.container=null,this.lines=[],this.operationRecords=[],"function"==typeof this._removeResizeEventFn&&(this._removeResizeEventFn(),this._removeResizeEventFn=null)};var n={getDocumentWidthHeight:()=>null!=window.innerHeight?{width:window.innerWidth,height:window.innerHeight}:"CSS1Compat"===document.compatMode?{width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight}:{width:document.body.scrollWidth,height:document.body.scrollHeight},offset(t){var e={top:0,left:0},i=t.offsetParent;for(e.top=t.offsetTop,e.left=t.offsetLeft;null!=i;)e.top+=i.offsetTop,e.left+=i.offsetLeft,i=i.offsetParent;return e},scrollTop:()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,scrollLeft:()=>window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,addClass(t,e){if(t&&e&&1===t.nodeType){var i=e.split(" ");if(t.classList){for(var o=0,s=i.length;o<s;o++){var r=i[o];t.classList.contains(r)||t.classList.add(r)}return t}var a=t.className&&t.className.length>0?t.className.split(" "):[];return 0===a.length?void(t.className=e):(Array.prototype.push.apply(a,i),a=n.arrayNoReapeat(a),t.className=a.join(" "),t)}},arrayNoReapeat(t,e){if(!t||0===t.length)return t;e=void 0!==e&&!!e;var i=t.length;let n=[];if(!e){for(var o={},s=0;s<i;s++)o[t[s]]=1;for(var r in o)n.push(r);return n}n.push(t[0]);for(s=1;s<i;s++){let e=t[s],i=!1;for(var a=0;a<n.length;a++)if(e===t[a]){i=!0;break}i||n.push(e)}return n},removeClass(t,e){if(t&&e&&1===t.nodeType){var i=e.split(" ");if(t.classList){for(var n=0,o=i.length;n<o;n++){var s=i[n];t.classList.contains(s)&&t.classList.remove(s)}return t}var r=t.className&&t.className.length>0?t.className.split(" "):[];if(0!==r.length){for(n=r.length;n>=0;n--)for(var a=0,h=i.length;a<h;a++)r[n]===i[a]&&r.splice(n,1);return t.className=r.join(" "),t}}},hasClass(t,e){if(t&&t.nodeName&&e){if(t.classList)return t.classList.contains(e);for(var i=!1,n=t.className.split(" "),o=0,s=n.length;o<s;o++)if(n[o]===e){i=!0;break}return i}},getStyle(t,e){if(t&&t.nodeName&&e){var i="";return window.getComputedStyle?i=window.getComputedStyle(t,null)[e]:t.currentStyle&&(i=t.currentStyle[e]),isNaN(parseFloat(i))?i:parseFloat(i)}},setCss(t,e,i){if(t&&t.nodeName){var n={}.toString.call(e),o={width:1,height:1,margin:1,padding:1,borderRadius:1,top:1,left:1,marginLeft:1,marginRight:1,marginTop:1,marginBottom:1,right:1,bottom:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,fontSize:1,lineHeight:1,textIndent:1,minWidth:1,maxWith:1};if("[object String]"===n&&void 0!==i)(e=e.replace(/\-(\w)/g,(function(t,e){return e.toUpperCase()})))in o&&!isNaN(Number(i))?t.style[e]=i+"px":t.style[e]=i;else if("[object Object]"===n){var s=t.style;for(var r in e){var a=e[r],h=Number(a);(r=r.replace(/\-(\w)/g,(function(t,e){return e.toUpperCase()})))in o&&!isNaN(h)?s[r]=a+"px":s[r]=a}}return this}},siblings(t){for(var e=[],i=t.parentNode.children,n=0,o=i.length;n<o;n++)i[n]!==t&&e.push(i[n]);return e},elementContains(t,e){if(t===e)return!1;if("function"==typeof t.contains)return t.contains(e);for(;;){if(!e)return!1;if(e===t)return!0;e=e.parentNode}return!1},on:function(t,e,i){if(!t)return this;if(!e||"string"!=typeof e)return this;if(!i||"function"!=typeof i)return this;if(t._events||(t._events={}),e in t._events){var n=this.getIndex(t._events[e],(function(t){return t===i}));(n<0||void 0===n)&&t._events[e].push(i)}else if(t._events[e]=[i],document.addEventListener){var o=function(i){var n=t._events[e];if(n&&n.length>0)for(var o=0,s=n.length;o<s;o++)n[o]&&n[o].call(t,i)};t.addEventListener(e,o,!1),t._events[e+"_fn"]=o}else if(window.attachEvent){o=function(){var i=t._events[e],n=window.event;n.preventDefault=function(){n.returnValue=!1},n.stopPropagation=function(){n.cancelBubble=!0};for(var o=0,s=i.length;o<s;o++)i[o].call(t,n)};t.attachEvent("on"+e,o),t._events[e+"_fn"]=o}return this},off:function(t,e,i){if(t&&e&&"string"==typeof e){if(!t._events)return this;if(!e)return this;var n=t._events[e],o=t._events[e+"_fn"];if(e&&!i)document.removeEventListener?t.removeEventListener(e,o,!1):window.detachEvent&&t.detachEvent("on"+e,o),delete t._events[e],delete t._events[e+"_fn"];else if(e&&i){if(!n)return;if(document.removeEventListener)(s=this.getIndex(n,(function(t){return t===i})))>-1&&n.splice(s,1),0===n.length&&(delete t._events[e],delete t._events[e+"_fn"]);else if(window.detachEvent){if(!n)return;var s;(s=this.getIndex(n,(function(t){return t===i})))>-1&&n.splice(s,1),0===n.length&&(delete t._events[e],delete t._events[e+"_fn"])}}return n=null,this}},getIndex(t,e){if(!t||0===t.length||!e||"function"!=typeof e)return-1;if(t.findIndex)return t.findIndex(e);for(var i=t.length,n=0,o=-1;n<i;n++){if(!0===e(t[n],o,t)){o=n;break}}return o},extend:function(){var t,e,i,n,o,s,r=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},a=function(t){var e,i;return!(!t||"[object Object]"!==toString.call(t))&&(!(e=Object.getPrototypeOf(t))||"function"==typeof(i={}.hasOwnProperty.call(e,"constructor")&&e.constructor)&&{}.toString.call(i)==={}.toString.call(Object))},h=arguments[0]||{},l=1,c=arguments.length,g=!1;for("boolean"==typeof h&&(g=h,h=arguments[l]||{},l++),"object"==typeof h||r(h)||(h={}),l===c&&(h=this,l--);l<c;l++)if(null!=(t=arguments[l]))for(e in t)n=t[e],"__proto__"!==e&&h!==n&&(g&&n&&(a(n)||(o=Array.isArray(n)))?(i=h[e],s=o&&!Array.isArray(i)?[]:o||a(i)?i:{},o=!1,h[e]=duesTools.extend(g,s,n)):void 0!==n&&(h[e]=n));return h},isEmptyObject(t){for(var e in t)return!1;return!0},parents(t,e){if(t&&t.nodeName&&e)for(var i=e.split(" "),n=t.parentElement;n;){for(var o=!0,s=0,r=i.length;s<r;s++)if(!this.hasClass(n,i[s])){o=!1;break}if(o)return n;n=n.parentElement}},getType:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?{}[toString.call(t)]||"object":typeof t}};return i}))}();
